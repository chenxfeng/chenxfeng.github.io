<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="https://chenfeng.github.io">
  <title>多媒体网络(Multimedia Networking) | chenxfeng&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="multimedia networking applicationsMultimedia: audio
analog audio signal sampled at constant rate

telephone: 8,000 samples/sec



CD music: 44,100 samples/sec


each sample quantized, i.e., rounded">
<meta property="og:type" content="article">
<meta property="og:title" content="多媒体网络(Multimedia Networking)">
<meta property="og:url" content="https://chenfeng.github.io/2017/06/29/computer_network/computer_network_7/index.html">
<meta property="og:site_name" content="chenxfeng's blog">
<meta property="og:description" content="multimedia networking applicationsMultimedia: audio
analog audio signal sampled at constant rate

telephone: 8,000 samples/sec



CD music: 44,100 samples/sec


each sample quantized, i.e., rounded">
<meta property="og:image" content="https://chenfeng.github.io/\img\multimedia_audio.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\multimedia_video.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\streaming_stored_video.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\streaming_stored_video_revisited.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\streaming_stored_video_clientSideBuffering.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\VoIP_fixed_playout_delay.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\VoIP_adaptive_playout_delay.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\VoIP_recovery_from_packet_loss.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\VoIP_recovery_from_packet_loss2.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\Voice_over_IP_Skype.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\Voice_over_IP_Skype2.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\RTP.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\RTP_header.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\RTCP.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\SIP_setting_up_call.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\SIP_example.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\network_support_for_multimedia.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\QoS_guarantee.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\token_bucket.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\QoS_tokenBucket_WFQ.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\diffserv_architecture.png">
<meta property="og:image" content="https://chenfeng.github.io/\img\classification_conditioning.png">
<meta property="og:updated_time" content="2017-07-01T14:04:04.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="多媒体网络(Multimedia Networking)">
<meta name="twitter:description" content="multimedia networking applicationsMultimedia: audio
analog audio signal sampled at constant rate

telephone: 8,000 samples/sec



CD music: 44,100 samples/sec


each sample quantized, i.e., rounded">
<meta name="twitter:image" content="https://chenfeng.github.io/\img\multimedia_audio.png">
  
    <link rel="alternative" href="/atom.xml" title="chenxfeng&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.2d7529.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="https://avatars0.githubusercontent.com/u/18254493?v=3&amp;s=460" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">chenxf</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/chenxfeng" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="https://avatars0.githubusercontent.com/u/18254493?v=3&amp;s=460" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">chenxf</h1>
			</hgroup>
			
			
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/chenxfeng" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 100%"><a href="/">主页</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            <article id="post-computer_network/computer_network_7" class="article article-type-post " itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      多媒体网络(Multimedia Networking)
    </h1>
  

        
        <a href="/2017/06/29/computer_network/computer_network_7/" class="archive-article-date">
  	<time datetime="2017-06-28T16:00:00.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-06-29</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="multimedia-networking-applications"><a href="#multimedia-networking-applications" class="headerlink" title="multimedia networking applications"></a>multimedia networking applications</h2><h3 id="Multimedia-audio"><a href="#Multimedia-audio" class="headerlink" title="Multimedia: audio"></a>Multimedia: audio</h3><ul>
<li>analog audio signal sampled at constant rate</li>
<li><ul>
<li>telephone: 8,000 samples/sec</li>
</ul>
</li>
<li><ul>
<li>CD music: 44,100 samples/sec</li>
</ul>
</li>
<li><p>each sample quantized, i.e., rounded</p>
</li>
<li><ul>
<li>e.g., 2^8=256 possible quantized values</li>
</ul>
</li>
<li><ul>
<li>each quantized value represented by bits, e.g., 8 bits for 256 values</li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\multimedia_audio.png" alt="multimedia_audio.png"></p>
</blockquote>
<ul>
<li>example: 8,000 samples/sec, 256 quantized values: 64,000 bps</li>
<li><ul>
<li>1 byte per sample, 8 bit * 8000 = 64,000 bps</li>
</ul>
</li>
<li>receiver converts bits back to analog signal:</li>
<li><ul>
<li>some quality reduction</li>
</ul>
</li>
</ul>
<a id="more"></a>
<ul>
<li>example rates</li>
<li><ul>
<li>CD: 1.411 Mbps</li>
</ul>
</li>
<li><ul>
<li>MP3: 96, 128, 160 kbps</li>
</ul>
</li>
<li><ul>
<li>Internet telephony: 5.3 kbps and up</li>
</ul>
</li>
</ul>
<h3 id="Multimedia-video"><a href="#Multimedia-video" class="headerlink" title="Multimedia: video"></a>Multimedia: video</h3><ul>
<li>video: sequence of images displayed at constant rate</li>
<li><ul>
<li>e.g., 24 images/sec</li>
</ul>
</li>
<li>digital image: array of pixels</li>
<li><ul>
<li>each pixel represented by bits</li>
</ul>
</li>
<li><p>coding: use redundancy <strong>within</strong> and <strong>between</strong> images to decrease # bits used to encode image</p>
</li>
<li><ul>
<li>spatial (within image)</li>
</ul>
</li>
<li><ul>
<li>temporal (from one image to next)</li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\multimedia_video.png" alt="multimedia_video.png"></p>
</blockquote>
<ul>
<li><strong>CBR: (constant bit rate)</strong>: video encoding rate fixed</li>
<li><p><strong>VBR: (variable bit rate)</strong>: video encoding rate changes as amount of spatial, temporal coding changes </p>
</li>
<li><p>examples:</p>
</li>
<li><ul>
<li>MPEG 1 (CD-ROM) 1.5 Mbps</li>
</ul>
</li>
<li><ul>
<li>MPEG2 (DVD) 3-6 Mbps</li>
</ul>
</li>
<li><ul>
<li>MPEG4 (often used in Internet, &lt; 1 Mbps)</li>
</ul>
</li>
</ul>
<h3 id="Multimedia-networking-3-application-types"><a href="#Multimedia-networking-3-application-types" class="headerlink" title="Multimedia networking: 3 application types"></a>Multimedia networking: 3 application types</h3><ul>
<li><strong>streaming, stored</strong> audio, video</li>
<li><ul>
<li><em>streaming</em>: can begin playout before downloading entire file</li>
</ul>
</li>
<li><ul>
<li><em>stored(at server)</em>: can transmit faster than audio/video will be rendered (implies storing/buffering at client)</li>
</ul>
</li>
<li><ul>
<li>e.g., YouTube, Netflix, Hulu</li>
</ul>
</li>
<li><p><strong>conversational</strong> voice/video over IP </p>
</li>
<li><ul>
<li>interactive nature of human-to-human conversation limits delay tolerance</li>
</ul>
</li>
<li><ul>
<li>e.g., Skype</li>
</ul>
</li>
<li><p><strong>streaming live</strong> audio, video</p>
</li>
<li><ul>
<li>e.g., live sporting event (futbol)</li>
</ul>
</li>
</ul>
<h2 id="streaming-stored-video"><a href="#streaming-stored-video" class="headerlink" title="streaming stored video"></a>streaming stored video</h2><blockquote>
<p><img src="\img\streaming_stored_video.png" alt="streaming_stored_video.png"></p>
</blockquote>
<h3 id="Streaming-stored-video-challenges"><a href="#Streaming-stored-video-challenges" class="headerlink" title="Streaming stored video: challenges"></a>Streaming stored video: challenges</h3><ul>
<li><strong>continuous playout constraint</strong>: once client playout begins, playback must match original timing </li>
<li><ul>
<li>… but <strong>network delays are variable</strong>(jitter), so will need <em>client-side buffer</em> to match playout requirements</li>
</ul>
</li>
<li>other challenges:</li>
<li><ul>
<li>client interactivity: pause, fast-forward, rewind, jump through video</li>
</ul>
</li>
<li><ul>
<li>video packets may be lost, retransmitted</li>
</ul>
</li>
</ul>
<h3 id="Streaming-stored-video-revisited"><a href="#Streaming-stored-video-revisited" class="headerlink" title="Streaming stored video: revisited"></a>Streaming stored video: revisited</h3><blockquote>
<p><img src="\img\streaming_stored_video_revisited.png" alt="streaming_stored_video_revisited.png"></p>
</blockquote>
<ul>
<li><strong>client-side buffering and playout delay</strong>: compensate for network-added delay, delay jitter</li>
</ul>
<blockquote>
<p><img src="\img\streaming_stored_video_clientSideBuffering.png" alt="streaming_stored_video_clientSideBuffering.png"></p>
</blockquote>
<ul>
<li><ol>
<li>Initial fill of buffer until playout begins at $t_p$</li>
</ol>
</li>
<li><ol>
<li>playout begins at $t_p$, </li>
</ol>
</li>
<li><ol>
<li>buffer fill level varies over time as fill rate $x(t)$ varies and playout rate $r$ is constant</li>
</ol>
</li>
<li><p>playout buffering: average fill rate (x’), playout rate (r):</p>
</li>
<li><ul>
<li>x’ &lt; r: buffer eventually empties (causing freezing of video playout until buffer again fills)</li>
</ul>
</li>
<li><ul>
<li>x’ &gt; r: buffer will not empty, provided initial playout delay is large enough to absorb variability in x(t)</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><strong>initial playout delay tradeoff</strong>: buffer starvation less likely with larger delay, but larger delay until user begins watching</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Streaming-multimedia-UDP"><a href="#Streaming-multimedia-UDP" class="headerlink" title="Streaming multimedia: UDP"></a>Streaming multimedia: UDP</h3><ul>
<li>server sends at rate appropriate for client </li>
<li><ul>
<li>often: send rate = encoding rate = constant rate</li>
</ul>
</li>
<li><ul>
<li>transmission rate can be oblivious to congestion levels</li>
</ul>
</li>
<li>short playout delay (2-5 seconds) to remove network jitter</li>
<li>error recovery: application-level, time permitting</li>
<li>RTP [RFC 2326]: multimedia payload types</li>
<li>UDP may not go through firewalls</li>
</ul>
<h3 id="Streaming-multimedia-HTTP"><a href="#Streaming-multimedia-HTTP" class="headerlink" title="Streaming multimedia: HTTP"></a>Streaming multimedia: HTTP</h3><ul>
<li>multimedia file retrieved via HTTP GET</li>
<li>send at maximum possible rate under TCP</li>
<li>fill rate fluctuates(起伏) due to TCP congestion control, retransmissions (in-order delivery)</li>
<li>larger playout delay: smooth TCP delivery rate</li>
<li>HTTP/TCP passes more easily through firewalls</li>
</ul>
<h2 id="voice-over-IP"><a href="#voice-over-IP" class="headerlink" title="voice-over-IP"></a>voice-over-IP</h2><ul>
<li><strong>VoIP end-end-delay requirement</strong>: <em>needed to maintain “conversational” aspect</em></li>
<li><ul>
<li>higher delays noticeable, impair interactivity</li>
</ul>
</li>
<li><ul>
<li>&lt; 150 msec:  good</li>
</ul>
</li>
<li><ul>
<li><blockquote>
<p>400 msec bad</p>
</blockquote>
</li>
</ul>
</li>
<li><ul>
<li>includes application-level (packetization, playout), network delays</li>
</ul>
</li>
<li><p><strong>session initialization</strong>: how does callee advertise IP address, port number, encoding algorithms?</p>
</li>
<li><strong>value-added services</strong>: call forwarding, screening, recording</li>
<li>emergency services: 911</li>
</ul>
<h3 id="VoIP-characteristics"><a href="#VoIP-characteristics" class="headerlink" title="VoIP characteristics"></a>VoIP characteristics</h3><ul>
<li>speaker’s audio: alternating talk spurts, silent periods.</li>
<li><ul>
<li>64 kbps during talk spurt</li>
</ul>
</li>
<li><ul>
<li>pkts generated only during talk spurts</li>
</ul>
</li>
<li><ul>
<li>20 msec chunks at 8 Kbytes/sec: 160 bytes of data</li>
</ul>
</li>
<li>application-layer header added to each chunk</li>
<li>chunk+header encapsulated into UDP or TCP segment</li>
<li>application sends segment into socket every 20 msec during talkspurt</li>
</ul>
<h3 id="VoIP-packet-loss-delay"><a href="#VoIP-packet-loss-delay" class="headerlink" title="VoIP: packet loss, delay"></a>VoIP: packet loss, delay</h3><ul>
<li><strong>network loss</strong>: IP datagram lost due to network congestion (router buffer overflow)</li>
<li><strong>delay loss</strong>: IP datagram arrives too late for playout at receiver</li>
<li><ul>
<li>delays: processing, queueing in network; end-system (sender, receiver) delays</li>
</ul>
</li>
<li><ul>
<li>typical maximum tolerable delay: 400 ms</li>
</ul>
</li>
<li><strong>loss tolerance</strong>: depending on voice encoding, loss concealment, packet loss rates between 1% and 10% can be tolerated</li>
</ul>
<p><strong>Delay jitter</strong></p>
<ul>
<li>end-to-end delays of two consecutive packets: difference can be more or less than 20 msec (transmission time difference)</li>
</ul>
<h3 id="VoIP-fixed-playout-delay"><a href="#VoIP-fixed-playout-delay" class="headerlink" title="VoIP: fixed playout delay"></a>VoIP: fixed playout delay</h3><ul>
<li>receiver attempts to playout each chunk exactly q msecs after chunk was generated.</li>
<li><ul>
<li>chunk has time stamp t: play out chunk at t+q </li>
</ul>
</li>
<li><ul>
<li>chunk arrives after t+q: data arrives too late for playout: data “lost”</li>
</ul>
</li>
<li>tradeoff in choosing q:</li>
<li><ul>
<li><strong>large q: less packet loss</strong></li>
</ul>
</li>
<li><ul>
<li>small q: better interactive experience</li>
</ul>
</li>
<li><p>sender generates packets every 20 msec during talk spurt.</p>
</li>
<li><ul>
<li>first packet received at time r</li>
</ul>
</li>
<li><ul>
<li>first playout schedule: begins at p</li>
</ul>
</li>
<li><ul>
<li>second playout schedule: begins at p’</li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\VoIP_fixed_playout_delay.png" alt="VoIP_fixed_playout_delay.png"></p>
</blockquote>
<h3 id="Adaptive-playout-delay"><a href="#Adaptive-playout-delay" class="headerlink" title="Adaptive playout delay"></a>Adaptive playout delay</h3><ul>
<li>goal: low playout delay, low late loss rate</li>
<li>approach: adaptive playout delay adjustment:</li>
<li><ul>
<li>estimate network delay, adjust playout delay at beginning of each talk spurt</li>
</ul>
</li>
<li><ul>
<li>silent periods compressed and elongated</li>
</ul>
</li>
<li><ul>
<li>chunks still played out every 20 msec during talk spurt</li>
</ul>
</li>
<li>adaptively estimate packet delay: (EWMA - exponentially weighted moving average, recall TCP RTT estimate): </li>
</ul>
<blockquote>
<p><img src="\img\VoIP_adaptive_playout_delay.png" alt="VoIP_adaptive_playout_delay.png"></p>
</blockquote>
<ul>
<li><p>also useful to estimate average deviation of delay, vi: </p>
<script type="math/tex; mode=display">v_i = (1 - \beta)v_{i-1} + \beta|r_i – t_i – d_i|</script></li>
<li><p>estimates $d_i$, $v_i$ calculated for every received packet, but used only at start of talk spurt</p>
</li>
<li><p>for first packet in talk spurt, playout time is:</p>
<script type="math/tex; mode=display">playout - time_i = t_i + d_i + Kv_i</script></li>
<li><p>remaining packets in talkspurt are played out periodically</p>
</li>
<li><p>Q: How does receiver determine whether packet is first in a talkspurt?</p>
</li>
<li>if no loss, receiver looks at successive timestamps</li>
<li><ul>
<li>difference of successive stamps &gt; 20 msec —&gt;talk spurt begins.</li>
</ul>
</li>
<li>with loss possible, receiver must look at both time stamps and sequence numbers</li>
<li><ul>
<li>difference of successive stamps &gt; 20 msec and sequence numbers without gaps —&gt; talk spurt begins.</li>
</ul>
</li>
</ul>
<h3 id="VoiP-recovery-from-packet-loss"><a href="#VoiP-recovery-from-packet-loss" class="headerlink" title="VoiP: recovery from packet loss"></a>VoiP: recovery from packet loss</h3><p>Challenge: recover from packet loss given small tolerable delay between original transmission and playout</p>
<ul>
<li>each ACK/NAK takes ~ one RTT</li>
<li>alternative: Forward Error Correction (FEC)</li>
<li><ul>
<li>send enough bits to allow recovery without retransmission (recall two-dimensional parity in Ch. 5)</li>
</ul>
</li>
<li><p><strong>simple FEC</strong>: </p>
</li>
<li><ul>
<li>for every group of n chunks, create redundant chunk by exclusive OR-ing n original chunks</li>
</ul>
</li>
<li><ul>
<li>send n+1 chunks, increasing bandwidth by factor 1/n</li>
</ul>
</li>
<li><ul>
<li>can reconstruct original n chunks if at most one lost chunk from n+1 chunks, with playout delay</li>
</ul>
</li>
<li><p><strong>another FEC scheme</strong>:</p>
</li>
<li><ul>
<li>“piggyback lower quality stream” </li>
</ul>
</li>
<li><ul>
<li>send lower resolution audio stream as redundant information</li>
</ul>
</li>
<li><ul>
<li>e.g., nominal stream PCM at 64 kbps and redundant stream GSM at 13 kbps</li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\VoIP_recovery_from_packet_loss.png" alt="VoIP_recovery_from_packet_loss.png"></p>
</blockquote>
<ul>
<li>non-consecutive loss: receiver can conceal loss </li>
<li><p>generalization: can also append (n-1)st and (n-2)nd low-bit rate chunk</p>
</li>
<li><p><strong>interleaving to conceal loss</strong>:</p>
</li>
<li><ul>
<li>audio chunks divided into smaller units, e.g. four 5 msec units per 20 msec audio chunk</li>
</ul>
</li>
<li><ul>
<li>packet contains small units from different chunks</li>
</ul>
</li>
<li><ul>
<li>if packet lost, still have most of every original chunk</li>
</ul>
</li>
<li><ul>
<li>no redundancy overhead, but increases playout delay</li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\VoIP_recovery_from_packet_loss2.png" alt="VoIP_recovery_from_packet_loss2.png"></p>
</blockquote>
<h3 id="Voice-over-IP-Skype"><a href="#Voice-over-IP-Skype" class="headerlink" title="Voice-over-IP: Skype"></a>Voice-over-IP: Skype</h3><ul>
<li>proprietary application-layer protocol (inferred via reverse engineering) </li>
<li><ul>
<li>encrypted msgs</li>
</ul>
</li>
<li>P2P components:</li>
<li><ul>
<li><strong>clients</strong>: Skype peers connect directly to each other for VoIP call</li>
</ul>
</li>
<li><ul>
<li><strong>super nodes (SN)</strong>: Skype peers with special functions</li>
</ul>
</li>
<li><ul>
<li><strong>overlay network</strong>: among SNs to locate SCs</li>
</ul>
</li>
<li><ul>
<li><strong>login server</strong></li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\Voice_over_IP_Skype.png" alt="Voice_over_IP_Skype.png"></p>
</blockquote>
<ul>
<li>Skype client operation:</li>
<li><ul>
<li><ol>
<li>joins Skype network by contacting SN (IP address cached) using TCP</li>
</ol>
</li>
</ul>
</li>
<li><ul>
<li><ol>
<li>logs-in (username, password) to centralized Skype login server</li>
</ol>
</li>
</ul>
</li>
<li><ul>
<li><ol>
<li>obtains IP address for callee from SN, SN overlay</li>
</ol>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>or client buddy list</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ol>
<li>initiate call directly to callee</li>
</ol>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\Voice_over_IP_Skype2.png" alt="Voice_over_IP_Skype2.png"></p>
</blockquote>
<h3 id="Skype-peers-as-relays"><a href="#Skype-peers-as-relays" class="headerlink" title="Skype: peers as relays"></a>Skype: peers as relays</h3><ul>
<li>problem: both Alice, Bob are behind “NATs” </li>
<li>NAT prevents outside peer from initiating connection to insider peer</li>
<li><p>inside peer can initiate connection to outside </p>
</li>
<li><p>relay solution: Alice, Bob maintain open connection to their SNs</p>
</li>
<li><ul>
<li>Alice signals her SN to connect to Bob</li>
</ul>
</li>
<li><ul>
<li>Alice’s SN connects to Bob’s SN</li>
</ul>
</li>
<li><ul>
<li>Bob’s SN connects to Bob over open connection Bob initially initiated to his SN</li>
</ul>
</li>
</ul>
<h2 id="protocols-for-real-time-conversational-applications-RTP-SIP"><a href="#protocols-for-real-time-conversational-applications-RTP-SIP" class="headerlink" title="protocols for real-time conversational applications(RTP, SIP)"></a>protocols for real-time conversational applications(RTP, SIP)</h2><h3 id="Real-Time-Protocol-RTP"><a href="#Real-Time-Protocol-RTP" class="headerlink" title="Real-Time Protocol (RTP)"></a>Real-Time Protocol (RTP)</h3><ul>
<li>RTP specifies packet structure for packets carrying audio, video data</li>
<li>RFC 3550</li>
<li>RTP packet provides </li>
<li><ul>
<li>payload type identification</li>
</ul>
</li>
<li><ul>
<li>packet sequence numbering</li>
</ul>
</li>
<li><ul>
<li>time stamping</li>
</ul>
</li>
<li>RTP runs in end systems</li>
<li>RTP packets encapsulated in UDP segments</li>
<li>interoperability: if two VoIP applications run RTP, they may be able to work together</li>
</ul>
<p><strong>RTP runs on top of UDP</strong></p>
<ul>
<li>RTP libraries provide transport-layer interface<br>that extends UDP: </li>
<li><ul>
<li>port numbers, IP addresses</li>
</ul>
</li>
<li><ul>
<li>payload type identification</li>
</ul>
</li>
<li><ul>
<li>packet sequence numbering</li>
</ul>
</li>
<li><ul>
<li>time-stamping</li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\RTP.png" alt="RTP.png"></p>
</blockquote>
<ul>
<li>RTP example: sending 64 kbps PCM-encoded voice over RTP</li>
<li><ul>
<li>application collects encoded data in chunks, e.g., every 20 msec = 160 bytes in a chunk</li>
</ul>
</li>
<li><ul>
<li>audio chunk + RTP header form RTP packet, which is encapsulated in UDP segment </li>
</ul>
</li>
<li><ul>
<li>RTP header indicates type of audio encoding in each packet</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>sender can change encoding during conference </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li>RTP header also contains sequence numbers, timestamps</li>
</ul>
</li>
</ul>
<h3 id="RTP-and-QoS"><a href="#RTP-and-QoS" class="headerlink" title="RTP and QoS"></a>RTP and QoS</h3><ul>
<li>RTP does <em>not</em> provide any mechanism to ensure timely data delivery or other QoS  guarantees</li>
<li>RTP encapsulation only seen at end systems (not by intermediate routers)</li>
<li><ul>
<li>routers provide best-effort service, making no special effort to ensure that RTP packets arrive at destination in timely matter</li>
</ul>
</li>
</ul>
<h3 id="RTP-header"><a href="#RTP-header" class="headerlink" title="RTP header"></a>RTP header</h3><blockquote>
<p><img src="\img\RTP_header.png" alt="RTP_header.png"></p>
</blockquote>
<ul>
<li><strong>payload type (7 bits)</strong>: indicates type of encoding currently being used.  If sender changes encoding during call, sender informs receiver via payload type field</li>
<li><ul>
<li>Payload type 0: PCM mu-law, 64 kbps</li>
</ul>
</li>
<li><ul>
<li>Payload type 3: GSM, 13 kbps</li>
</ul>
</li>
<li><ul>
<li>Payload type 7: LPC, 2.4 kbps</li>
</ul>
</li>
<li><ul>
<li>Payload type 26: Motion JPEG</li>
</ul>
</li>
<li><ul>
<li>Payload type 31: H.261</li>
</ul>
</li>
<li><ul>
<li>Payload type 33: MPEG2 video</li>
</ul>
</li>
<li><p><strong>sequence # (16 bits)</strong>: increment by one for each RTP packet sent</p>
</li>
<li><ul>
<li>detect packet loss, restore packet sequence</li>
</ul>
</li>
<li><p><strong>timestamp field (32 bits long)</strong>: sampling instant of first byte in this RTP data packet</p>
</li>
<li><ul>
<li>for audio, timestamp clock increments by one for each sampling period (e.g., each 125 usecs for 8 KHz sampling clock) </li>
</ul>
</li>
<li><ul>
<li>if application generates chunks of 160 encoded samples, timestamp increases by 160 for each RTP packet when source is active. Timestamp clock continues to increase at constant rate when source is inactive.</li>
</ul>
</li>
<li><p><strong>SSRC field (32 bits long)</strong>:  identifies source of RTP stream. Each stream in RTP session has distinct SSRC</p>
</li>
</ul>
<h3 id="RTSP-RTP-programming-assignment"><a href="#RTSP-RTP-programming-assignment" class="headerlink" title="RTSP/RTP programming assignment"></a>RTSP/RTP programming assignment</h3><ul>
<li>build a server that encapsulates stored video frames into RTP packets</li>
<li><ul>
<li>grab video frame, add RTP headers, create UDP segments, send segments to UDP socket</li>
</ul>
</li>
<li><ul>
<li>include seq numbers and time stamps</li>
</ul>
</li>
<li><ul>
<li>client RTP provided for you</li>
</ul>
</li>
<li>also write client side of RTSP</li>
<li><ul>
<li>issue play/pause commands</li>
</ul>
</li>
<li><ul>
<li>server RTSP provided for you</li>
</ul>
</li>
</ul>
<h3 id="Real-Time-Control-Protocol-RTCP"><a href="#Real-Time-Control-Protocol-RTCP" class="headerlink" title="Real-Time Control Protocol (RTCP)"></a>Real-Time Control Protocol (RTCP)</h3><ul>
<li>works in conjunction with RTP</li>
<li>each participant in RTP session periodically sends RTCP control packets to all other participants</li>
<li>each RTCP packet contains sender and/or receiver reports</li>
<li><ul>
<li>report statistics useful to  application: # packets sent, # packets lost, interarrival jitter</li>
</ul>
</li>
<li>feedback used to control performance</li>
<li><ul>
<li>sender may modify its transmissions based on  feedback</li>
</ul>
</li>
</ul>
<h3 id="RTCP-multiple-multicast-senders"><a href="#RTCP-multiple-multicast-senders" class="headerlink" title="RTCP: multiple multicast senders"></a>RTCP: multiple multicast senders</h3><blockquote>
<p><img src="\img\RTCP.png" alt="RTCP.png"></p>
</blockquote>
<ul>
<li>each RTP session: typically a single multicast address; all RTP/RTCP packets belonging to session use multicast address</li>
<li>RTP, RTCP packets distinguished from each other via distinct port numbers</li>
<li>to limit traffic, each participant reduces RTCP traffic as number of conference participants increases </li>
</ul>
<h3 id="RTCP-packet-types"><a href="#RTCP-packet-types" class="headerlink" title="RTCP: packet types"></a>RTCP: packet types</h3><ul>
<li>receiver report packets:</li>
<li><ul>
<li>fraction of packets lost, last sequence number, average interarrival jitter</li>
</ul>
</li>
<li>sender report packets: </li>
<li><ul>
<li>SSRC of RTP stream, current time, number of packets sent, number of bytes sent </li>
</ul>
</li>
<li>source description packets: </li>
<li><ul>
<li>e-mail address of sender, sender’s name, SSRC of associated RTP stream </li>
</ul>
</li>
<li><ul>
<li>provide mapping between the SSRC and the user/host name</li>
</ul>
</li>
</ul>
<h3 id="RTCP-stream-synchronization"><a href="#RTCP-stream-synchronization" class="headerlink" title="RTCP: stream synchronization"></a>RTCP: stream synchronization</h3><ul>
<li>RTCP can synchronize different media streams within a RTP session </li>
<li><ul>
<li>e.g., video conferencing app: each sender generates one RTP stream for video, one for audio. </li>
</ul>
</li>
<li>timestamps in RTP packets tied to the video, audio sampling clocks</li>
<li><ul>
<li>not tied to wall-clock time</li>
</ul>
</li>
<li>each RTCP sender-report packet contains (for most recently generated packet in associated RTP stream):</li>
<li><ul>
<li>timestamp of RTP packet </li>
</ul>
</li>
<li><ul>
<li>wall-clock time for when packet was created</li>
</ul>
</li>
<li>receivers uses association to synchronize playout of audio, video </li>
</ul>
<h3 id="RTCP-bandwidth-scaling"><a href="#RTCP-bandwidth-scaling" class="headerlink" title="RTCP: bandwidth scaling"></a>RTCP: bandwidth scaling</h3><blockquote>
<p>RTCP attempts to limit its traffic to 5% of session bandwidth</p>
</blockquote>
<ul>
<li>example : one sender, sending video at 2 Mbps</li>
<li><ul>
<li>RTCP attempts to limit RTCP traffic to 100 Kbps</li>
</ul>
</li>
<li><ul>
<li>RTCP gives 75% of  rate to receivers; remaining 25% to sender</li>
</ul>
</li>
<li><ul>
<li>75 kbps is equally shared among receivers: </li>
</ul>
</li>
<li><ul>
<li><ul>
<li>with R receivers,  each receiver gets to send RTCP traffic at 75/R kbps. </li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li>sender gets to send RTCP traffic at 25 kbps. </li>
</ul>
</li>
<li><ul>
<li>participant determines RTCP packet transmission period by calculating avg RTCP packet size (across entire session) and dividing by  allocated rate </li>
</ul>
</li>
</ul>
<h3 id="SIP-Session-Initiation-Protocol-RFC-3261"><a href="#SIP-Session-Initiation-Protocol-RFC-3261" class="headerlink" title="SIP: Session Initiation Protocol [RFC 3261]"></a>SIP: Session Initiation Protocol [RFC 3261]</h3><ul>
<li>long-term vision:</li>
<li><ul>
<li>all telephone calls, video conference calls take place over Internet</li>
</ul>
</li>
<li><ul>
<li>people identified by names or e-mail addresses, rather than by phone numbers</li>
</ul>
</li>
<li><ul>
<li>can reach callee (if callee so desires), no matter where callee roams, no matter what IP device callee is currently using</li>
</ul>
</li>
</ul>
<h3 id="SIP-services"><a href="#SIP-services" class="headerlink" title="SIP services"></a>SIP services</h3><ul>
<li>SIP provides mechanisms for call setup:</li>
<li><ul>
<li>for caller to let callee know she wants to establish a call</li>
</ul>
</li>
<li><ul>
<li>so caller, callee can agree on media type, encoding</li>
</ul>
</li>
<li><ul>
<li>to end call</li>
</ul>
</li>
<li>determine current IP address of callee:</li>
<li><ul>
<li>Maps identifier to current IP address</li>
</ul>
</li>
<li>call management:</li>
<li><ul>
<li>add new media streams during call</li>
</ul>
</li>
<li><ul>
<li>change encoding during call</li>
</ul>
</li>
<li><ul>
<li>invite others </li>
</ul>
</li>
<li><ul>
<li>transfer, hold calls</li>
</ul>
</li>
</ul>
<h3 id="Setting-up-a-call"><a href="#Setting-up-a-call" class="headerlink" title="Setting up a call"></a>Setting up a call</h3><p>Example: setting up call to known IP address</p>
<blockquote>
<p><img src="\img\SIP_setting_up_call.png" alt="SIP_setting_up_call.png"></p>
</blockquote>
<ul>
<li>Alice’s SIP invite message indicates her port number, IP address, encoding she prefers to receive (PCM mlaw)</li>
<li>Bob’s 200 OK message indicates his port number, IP address, preferred encoding (GSM)</li>
<li>SIP messages can be sent over TCP or UDP; here sent over RTP/UDP</li>
<li><p>default SIP port number is 5060</p>
</li>
<li><p>codec negotiation:</p>
</li>
<li><ul>
<li>suppose Bob doesn’t have PCM mlaw encoder </li>
</ul>
</li>
<li><ul>
<li>Bob will instead reply with 606 Not Acceptable Reply, listing his encoders. Alice can then send new INVITE message, advertising different encoder</li>
</ul>
</li>
<li><p>rejecting a call</p>
</li>
<li><ul>
<li>Bob can reject with replies “busy,” “gone,” “payment required,” “forbidden”</li>
</ul>
</li>
<li><p>media can be sent over RTP or some other protocol</p>
</li>
</ul>
<h3 id="Example-of-SIP-message"><a href="#Example-of-SIP-message" class="headerlink" title="Example of SIP message"></a>Example of SIP message</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">INVITE sip:bob@domain.com SIP/2.0</div><div class="line">Via: SIP/2.0/UDP 167.180.112.24</div><div class="line">From: sip:alice@hereway.com</div><div class="line">To: sip:bob@domain.com </div><div class="line">Call-ID: a2e3a@pigeon.hereway.com</div><div class="line">Content-Type: application/sdp</div><div class="line">Content-Length: 885</div><div class="line"></div><div class="line">c=IN IP4 167.180.112.24</div><div class="line">m=audio 38060 RTP/AVP 0</div></pre></td></tr></table></figure>
<ul>
<li>Notes:</li>
<li><ul>
<li>HTTP message syntax</li>
</ul>
</li>
<li><ul>
<li>sdp = session description protocol</li>
</ul>
</li>
<li><ul>
<li>Call-ID is unique for every call</li>
</ul>
</li>
<li><p>Here we don’t know Bob’s IP address</p>
</li>
<li><ul>
<li>intermediate SIP servers needed</li>
</ul>
</li>
<li>Alice sends, receives SIP messages using SIP default port 5060</li>
<li>Alice specifies in header that SIP client sends, receives SIP messages over UDP</li>
</ul>
<h3 id="Name-translation-user-location"><a href="#Name-translation-user-location" class="headerlink" title="Name translation, user location"></a>Name translation, user location</h3><ul>
<li>caller wants to call callee, but only has callee’s name or e-mail address.</li>
<li>need to get IP address of callee’s current host:</li>
<li><ul>
<li>user moves around</li>
</ul>
</li>
<li><ul>
<li>DHCP protocol</li>
</ul>
</li>
<li><ul>
<li>user has different IP devices (PC, smartphone, car device)</li>
</ul>
</li>
<li><p>result can be based on:</p>
</li>
<li><ul>
<li>time of day (work, home)</li>
</ul>
</li>
<li><ul>
<li>caller (don’t want boss to call you at home)</li>
</ul>
</li>
<li><ul>
<li>status of callee (calls sent to voicemail when callee is already talking to someone)</li>
</ul>
</li>
</ul>
<h3 id="SIP-registrar"><a href="#SIP-registrar" class="headerlink" title="SIP registrar"></a>SIP registrar</h3><ul>
<li>one function of SIP server: <strong>registrar</strong></li>
<li>when Bob starts SIP client, client sends SIP REGISTER message to Bob’s registrar server</li>
</ul>
<p>register message:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">REGISTER sip:domain.com SIP/2.0</div><div class="line">Via: SIP/2.0/UDP 193.64.210.89 </div><div class="line">From: sip:bob@domain.com</div><div class="line">To: sip:bob@domain.com</div><div class="line">Expires: 3600</div></pre></td></tr></table></figure>
<h3 id="SIP-proxy"><a href="#SIP-proxy" class="headerlink" title="SIP proxy"></a>SIP proxy</h3><ul>
<li>another function of SIP server: <strong>proxy</strong></li>
<li>Alice sends invite message to her proxy server</li>
<li><ul>
<li>contains address sip:bob@domain.com</li>
</ul>
</li>
<li><ul>
<li>proxy responsible for routing SIP messages to callee, possibly through multiple proxies</li>
</ul>
</li>
<li>Bob sends response back through same set of SIP proxies</li>
<li>proxy returns Bob’s SIP response message to Alice </li>
<li><ul>
<li>contains Bob’s IP address</li>
</ul>
</li>
<li>SIP proxy analogous to local DNS server plus TCP setup</li>
</ul>
<blockquote>
<p><img src="\img\SIP_example.png" alt="SIP_example.png"></p>
</blockquote>
<h3 id="Comparison-with-H-323"><a href="#Comparison-with-H-323" class="headerlink" title="Comparison with H.323"></a>Comparison with H.323</h3><ul>
<li>H.323: another signaling protocol for real-time, interactive multimedia</li>
<li>H.323: complete, vertically integrated suite of protocols for multimedia conferencing: signaling, registration, admission control, transport, codecs</li>
<li>SIP: single component. Works with RTP, but does not mandate it. Can be combined with other protocols, services</li>
<li>H.323 comes from the ITU (telephony)</li>
<li>SIP comes from IETF: borrows much of its concepts from HTTP</li>
<li><ul>
<li>SIP has Web flavor; H.323 has telephony flavor</li>
</ul>
</li>
<li>SIP uses KISS principle: Keep It Simple Stupid</li>
</ul>
<h2 id="network-support-for-multimedia"><a href="#network-support-for-multimedia" class="headerlink" title="network support for multimedia"></a>network support for multimedia</h2><blockquote>
<p><img src="\img\network_support_for_multimedia.png" alt="network_support_for_multimedia.png"></p>
</blockquote>
<h3 id="Dimensioning-best-effort-networks"><a href="#Dimensioning-best-effort-networks" class="headerlink" title="Dimensioning best effort networks"></a>Dimensioning best effort networks</h3><ul>
<li>approach: deploy enough link capacity so that congestion doesn’t occur, multimedia traffic flows without delay or loss</li>
<li><ul>
<li>low complexity of network mechanisms (use current “best effort” network)</li>
</ul>
</li>
<li><ul>
<li>high bandwidth costs</li>
</ul>
</li>
<li><p>challenges:</p>
</li>
<li><ul>
<li><em>network dimensioning</em>: how much bandwidth is “enough?”</li>
</ul>
</li>
<li><ul>
<li><em>estimating network traffic demand</em>: needed to determine how much bandwidth is “enough” (for that much traffic)</li>
</ul>
</li>
</ul>
<h3 id="Providing-multiple-classes-of-service"><a href="#Providing-multiple-classes-of-service" class="headerlink" title="Providing multiple classes of service"></a>Providing multiple classes of service</h3><ul>
<li>thus far: making the best of best effort service</li>
<li><ul>
<li>one-size fits all service model</li>
</ul>
</li>
<li>alternative: multiple classes of service</li>
<li><ul>
<li>partition traffic into classes</li>
</ul>
</li>
<li><ul>
<li>network treats different classes of traffic differently (analogy: VIP service versus regular service)</li>
</ul>
</li>
<li>granularity: differential service among multiple classes, <em>not among individual connections</em></li>
<li>history: ToS bits</li>
</ul>
<p>Multiple classes of service: scenario</p>
<ul>
<li>mixed HTTP and VoIP</li>
<li>example:  1Mbps VoIP, HTTP share 1.5 Mbps link. </li>
<li><ul>
<li>HTTP bursts can congest router, cause audio loss</li>
</ul>
</li>
<li><ul>
<li>want to give priority to audio over HTTP</li>
</ul>
</li>
<li><p>Principle 1</p>
</li>
<li><ul>
<li>packet marking needed for router to distinguish between different classes; and new router policy to treat packets accordingly</li>
</ul>
</li>
<li><p>what if applications misbehave (VoIP sends higher than declared rate)</p>
</li>
<li><ul>
<li>policing: force source adherence to bandwidth allocations</li>
</ul>
</li>
<li><p>marking, policing at network edge</p>
</li>
<li><p>Principle 2</p>
</li>
<li><ul>
<li>provide protection (isolation) for one class from others</li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\QoS_guarantee.png" alt="QoS_guarantee.png"></p>
</blockquote>
<ul>
<li><p>allocating fixed (non-sharable) bandwidth to flow: inefficient use of bandwidth if flows doesn’t use its allocation</p>
</li>
<li><p>Principle 3</p>
</li>
<li><ul>
<li>while providing isolation, it is desirable to use<br>resources as efficiently as possible</li>
</ul>
</li>
</ul>
<h3 id="Scheduling-and-policing-mechanisms"><a href="#Scheduling-and-policing-mechanisms" class="headerlink" title="Scheduling and policing mechanisms"></a>Scheduling and policing mechanisms</h3><ul>
<li><p><strong>packet scheduling</strong>: choose next queued packet to send on outgoing link</p>
</li>
<li><p>Policing mechanisms</p>
</li>
<li>goal: limit traffic to not exceed declared parameters</li>
</ul>
<p>Three common-used criteria: </p>
<ul>
<li><em>(long term) average rate</em>: how many pkts can be sent per unit time (in the long run)</li>
<li><ul>
<li>crucial question: what is the interval length: 100 packets per sec or 6000 packets per min have same average!</li>
</ul>
</li>
<li><em>peak rate</em>: e.g., 6000 pkts per min (ppm) avg.; 1500 ppm peak rate</li>
<li><em>(max.) burst size</em>: max number of pkts sent consecutively (with no intervening idle)</li>
</ul>
<h3 id="Policing-mechanisms-implementation"><a href="#Policing-mechanisms-implementation" class="headerlink" title="Policing mechanisms: implementation"></a>Policing mechanisms: implementation</h3><ul>
<li><strong>token bucket</strong>: limit input to specified <em>burst size</em> and <em>average rate</em></li>
</ul>
<blockquote>
<p><img src="\img\token_bucket.png" alt="token_bucket.png"></p>
</blockquote>
<ul>
<li>bucket can hold b tokens</li>
<li>tokens generated at rate r token/sec unless bucket full</li>
<li><strong>over interval of length t: number of packets admitted less than or equal to  (r t + b)</strong></li>
</ul>
<h3 id="Policing-and-QoS-guarantees"><a href="#Policing-and-QoS-guarantees" class="headerlink" title="Policing and QoS guarantees"></a>Policing and QoS guarantees</h3><ul>
<li>token bucket, WFQ combine to provide guaranteed upper bound on delay, i.e., <strong>QoS guarantee!</strong></li>
</ul>
<blockquote>
<p><img src="\img\QoS_tokenBucket_WFQ.png" alt="QoS_tokenBucket_WFQ.png"></p>
</blockquote>
<h3 id="Differentiated-services"><a href="#Differentiated-services" class="headerlink" title="Differentiated services"></a>Differentiated services</h3><ul>
<li>want “qualitative” service classes</li>
<li><ul>
<li>“behaves like a wire”</li>
</ul>
</li>
<li><ul>
<li>relative service distinction: Platinum, Gold, Silver</li>
</ul>
</li>
<li><strong>scalability</strong>: simple functions in network core, relatively complex functions at edge routers (or hosts)</li>
<li><ul>
<li>signaling, maintaining per-flow router state difficult with large number of flows </li>
</ul>
</li>
<li>don’t define service classes, provide functional components to build service classes</li>
</ul>
<p><strong>Diffserv architecture</strong></p>
<blockquote>
<p><img src="\img\diffserv_architecture.png" alt="diffserv_architecture.png"></p>
</blockquote>
<p><strong>Edge-router packet marking</strong></p>
<ul>
<li>profile: pre-negotiated rate r, bucket size b</li>
<li><p>packet marking at edge based on <em>per-flow</em> profile</p>
</li>
<li><p>possible use of marking:</p>
</li>
<li><ul>
<li>class-based marking: packets of different classes marked differently</li>
</ul>
</li>
<li><ul>
<li>intra-class marking: conforming portion of flow marked differently than non-conforming one</li>
</ul>
</li>
</ul>
<p><strong>Diffserv packet marking: details</strong></p>
<ul>
<li>packet is marked in the Type of Service (TOS) in IPv4, and Traffic Class in IPv6</li>
<li>6 bits used for Differentiated Service Code Point (DSCP)</li>
<li><ul>
<li>determine PHB that the packet will receive</li>
</ul>
</li>
<li><ul>
<li>2 bits currently unused</li>
</ul>
</li>
</ul>
<h3 id="Classification-conditioning"><a href="#Classification-conditioning" class="headerlink" title="Classification, conditioning"></a>Classification, conditioning</h3><ul>
<li>may be desirable to limit traffic injection rate of some class:</li>
<li><ul>
<li>user declares traffic profile (e.g., rate, burst size)</li>
</ul>
</li>
<li><ul>
<li>traffic metered, shaped if non-conforming </li>
</ul>
</li>
</ul>
<blockquote>
<p><img src="\img\classification_conditioning.png" alt="classification_conditioning.png"></p>
</blockquote>
<h3 id="Forwarding-Per-hop-Behavior-PHB"><a href="#Forwarding-Per-hop-Behavior-PHB" class="headerlink" title="Forwarding Per-hop Behavior (PHB)"></a>Forwarding Per-hop Behavior (PHB)</h3><ul>
<li>PHB result in a different observable (measurable) forwarding performance behavior</li>
<li>PHB does not specify what mechanisms to use to ensure required PHB performance behavior</li>
<li>examples: </li>
<li><ul>
<li>class A gets x% of outgoing link bandwidth over time intervals of a specified length</li>
</ul>
</li>
<li><ul>
<li>class A packets leave first before packets from class B</li>
</ul>
</li>
</ul>
<p>PHBs proposed:</p>
<ul>
<li>expedited forwarding: packet departure rate of a class equals or exceeds specified rate </li>
<li><ul>
<li>logical link with a minimum guaranteed rate</li>
</ul>
</li>
<li><ul>
<li>low delay, low loss and low jitter, suitable for voice, video and other realtime services</li>
</ul>
</li>
<li>assured forwarding: 4 classes of traffic</li>
<li><ul>
<li>each guaranteed minimum amount of bandwidth</li>
</ul>
</li>
<li><ul>
<li>each with three drop preference partitions</li>
</ul>
</li>
</ul>
<h3 id="Per-connection-QOS-guarantees"><a href="#Per-connection-QOS-guarantees" class="headerlink" title="Per-connection QOS guarantees"></a>Per-connection QOS guarantees</h3><ul>
<li><p>basic fact of life: can not support traffic demands beyond link capacity</p>
</li>
<li><p>Principle 4</p>
</li>
<li><ul>
<li>call admission: flow declares its needs, network may block call (e.g., busy signal) if it cannot meet needs</li>
</ul>
</li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">computer network</a>
        		</li>
      		
		</ul>
	</div>

      

      

      
        
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="http://s.jiathis.com/qrcode.php?url=https://chenfeng.github.io/2017/06/29/computer_network/computer_network_7/" alt="微信分享二维码">
    </div>
</div>

<div class="mask js-mask"></div>
      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2017/06/30/computer_network/computer_network_8/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          网络安全(Security)
        
      </div>
    </a>
  
  
    <a href="/2017/06/28/computer_network/computer_network_6/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">无线网络和移动网络(Wireless and Mobile Networks)</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>






  
    <div class="duoshuo"></div>
  




          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 chenxf
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.2d7529.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">C++</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">computer network</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">宏观经济学</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">微观经济学</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">分布式计算</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">并行计算</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>